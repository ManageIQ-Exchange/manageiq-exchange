Started GET "/" for 127.0.0.1 at 2018-02-07 23:18:37 +0100
  [1m[35m (7.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:18:51 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)


Started POST "/v1/users/sign_in" for 127.0.0.1 at 2018-02-07 23:18:51 +0100
Processing by V1::Users::SessionsController#create as HTML
  Parameters: {"session"=>{}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Creating session, verifying code sent
Verifying that the user code is valid and authenticating user
Generating new connection to GitHub
Valid code, finding or creating user aljesusg
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("id", "name", "github_avatar_url", "github_html_url", "github_id", "github_login", "github_company", "github_type", "github_blog", "github_location", "github_bio", "github_created_at", "github_updated_at", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["id", 3019213], ["name", "Alberto Gutierrez"], ["github_avatar_url", "https://avatars2.githubusercontent.com/u/3019213?v=4"], ["github_html_url", "https://github.com/aljesusg"], ["github_id", "3019213"], ["github_login", "aljesusg"], ["github_company", "@ManageIQ Red Hat, GDG"], ["github_type", "User"], ["github_blog", ""], ["github_location", "Granada,Spain"], ["github_bio", ""], ["github_created_at", "2012-12-11 19:52:55"], ["github_updated_at", "2018-01-27 15:58:25"], ["email", "aljesusg@gmail.com"], ["created_at", "2018-02-07 22:18:52.927294"], ["updated_at", "2018-02-07 22:18:52.927294"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Creating user session token
  [1m[36mAuthenticationToken Load (0.5ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."body" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["body", "c6c1666a72c90a74ab839822208f1a6990de36431cb8941a3743953823f95d9d"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (30.0ms)[0m  [1m[32mINSERT INTO "authentication_tokens" ("body", "user_id", "last_used_at", "ip_address", "user_agent", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["body", "c6c1666a72c90a74ab839822208f1a6990de36431cb8941a3743953823f95d9d"], ["user_id", 3019213], ["last_used_at", "2018-02-07 22:18:53.132868"], ["ip_address", "127.0.0.1"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36"], ["created_at", "2018-02-07 22:18:53.147710"], ["updated_at", "2018-02-07 22:18:53.147710"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.3ms)[0m  [1m[33mUPDATE "authentication_tokens" SET "updated_at" = $1, "github_token" = $2, "provider" = $3 WHERE "authentication_tokens"."id" = $4[0m  [["updated_at", "2018-02-07 22:18:53.185428"], ["github_token", "8ab5a66f47d1dc1d356f721162a5cd6990e42845"], ["provider", "github.com"], ["id", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
Returning user info and token
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.57ms)
Completed 200 OK in 1578ms (Views: 2.7ms | ActiveRecord: 54.2ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:19:02 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)


Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:19:02 +0100
Processing by V1::SpinCandidatesController#index as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (6.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
Completed 204 No Content in 27ms (Views: 0.2ms | ActiveRecord: 12.1ms)


Started POST "/v1/spin_candidates/refresh" for 127.0.0.1 at 2018-02-07 23:19:07 +0100
Processing by V1::SpinCandidatesController#refresh as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] Enqueued RefreshSpinCandidatesJob (Job ID: dbb68095-8586-4326-9c75-a2b48548ec29) to Async(default) with arguments: {:user=>#<GlobalID:0x007f8a8a090508 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"6dea9E6xsfXGJjz8znAT"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 202 Accepted in 41ms (Views: 2.6ms | ActiveRecord: 0.7ms)


  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29] Performing RefreshSpinCandidatesJob (Job ID: dbb68095-8586-4326-9c75-a2b48548ec29) from Async(default) with arguments: {:user=>#<GlobalID:0x007f8a83f647e8 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"6dea9E6xsfXGJjz8znAT"}
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29] Refresh Spin Candidates Job for user: 3019213
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29]   [1m[36mAuthenticationToken Load (1.1ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29]   [1m[36mCACHE AuthenticationToken Load (0.0ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29] Generating new connection to GitHub
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29]   [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29]   [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29]   [1m[36mSpin Load (0.6ms)[0m  [1m[34mSELECT "spins".* FROM "spins" WHERE 1=0[0m
[ActiveJob] [RefreshSpinCandidatesJob] [dbb68095-8586-4326-9c75-a2b48548ec29] Performed RefreshSpinCandidatesJob (Job ID: dbb68095-8586-4326-9c75-a2b48548ec29) from Async(default) in 19607.69ms
Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:20:40 +0100
Started GET "/" for 127.0.0.1 at 2018-02-07 23:20:40 +0100
Processing by V1::SpinCandidatesController#index as HTML
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms)


  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
Completed 204 No Content in 9ms (Views: 0.2ms | ActiveRecord: 2.3ms)


Started POST "/v1/spin_candidates/refresh" for 127.0.0.1 at 2018-02-07 23:20:56 +0100
Processing by V1::SpinCandidatesController#refresh as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] Enqueued RefreshSpinCandidatesJob (Job ID: a114f6c9-8e76-4dc5-a788-cebe1d32ba9c) to Async(default) with arguments: {:user=>#<GlobalID:0x007f8a8a255780 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"6dea9E6xsfXGJjz8znAT"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 202 Accepted in 6ms (Views: 0.7ms | ActiveRecord: 0.7ms)


  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c] Performing RefreshSpinCandidatesJob (Job ID: a114f6c9-8e76-4dc5-a788-cebe1d32ba9c) from Async(default) with arguments: {:user=>#<GlobalID:0x007f8a8c10bad0 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"6dea9E6xsfXGJjz8znAT"}
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c] Refresh Spin Candidates Job for user: 3019213
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c]   [1m[36mAuthenticationToken Load (0.6ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c]   [1m[36mCACHE AuthenticationToken Load (0.0ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c] Generating new connection to GitHub
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c]   [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c]   [1m[36mSpinCandidate Load (0.3ms)[0m  [1m[34mSELECT "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c]   [1m[36mSpin Load (0.7ms)[0m  [1m[34mSELECT "spins".* FROM "spins" WHERE 1=0[0m
[ActiveJob] [RefreshSpinCandidatesJob] [a114f6c9-8e76-4dc5-a788-cebe1d32ba9c] Performed RefreshSpinCandidatesJob (Job ID: a114f6c9-8e76-4dc5-a788-cebe1d32ba9c) from Async(default) in 18718.49ms
Started POST "/v1/spin_candidates/refresh" for 127.0.0.1 at 2018-02-07 23:24:52 +0100
Processing by V1::SpinCandidatesController#refresh as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] Enqueued RefreshSpinCandidatesJob (Job ID: 77892d7d-9002-4e11-9a43-c5c9b44ef15e) to Async(default) with arguments: {:user=>#<GlobalID:0x007f8a84d38ab8 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"6dea9E6xsfXGJjz8znAT"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 202 Accepted in 11ms (Views: 0.7ms | ActiveRecord: 0.8ms)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e] Performing RefreshSpinCandidatesJob (Job ID: 77892d7d-9002-4e11-9a43-c5c9b44ef15e) from Async(default) with arguments: {:user=>#<GlobalID:0x007f8a84cf9bb0 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"6dea9E6xsfXGJjz8znAT"}
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e] Refresh Spin Candidates Job for user: 3019213
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e]   [1m[36mAuthenticationToken Load (0.6ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e]   [1m[36mCACHE AuthenticationToken Load (0.0ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e] Generating new connection to GitHub
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e]   [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e]   [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e]   [1m[36mSpin Load (0.4ms)[0m  [1m[34mSELECT "spins".* FROM "spins" WHERE 1=0[0m
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e]   [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "spin_candidates" ("id", "full_name", "validation_log", "user_id", "created_at", "updated_at", "published", "validated") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["id", 120679426], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["validation_log", "Pending validation"], ["user_id", 3019213], ["created_at", "2018-02-07 22:25:11.701433"], ["updated_at", "2018-02-07 22:25:11.701433"], ["published", "f"], ["validated", "f"]]
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [RefreshSpinCandidatesJob] [77892d7d-9002-4e11-9a43-c5c9b44ef15e] Performed RefreshSpinCandidatesJob (Job ID: 77892d7d-9002-4e11-9a43-c5c9b44ef15e) from Async(default) in 19680.09ms
Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:25:19 +0100
Started GET "/" for 127.0.0.1 at 2018-02-07 23:25:19 +0100
Processing by V1::SpinCandidatesController#index as HTML
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms)


  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[36mSpinCandidate Load (0.7ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" LIMIT $1 OFFSET $2[0m  [["LIMIT", 20], ["OFFSET", 0]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (3.79ms)
Completed 200 OK in 38ms (Views: 22.7ms | ActiveRecord: 3.0ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:25:26 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.8ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/spin_candidate.rb:13:in `publish_spin'
app/controllers/v1/spin_candidates_controller.rb:92:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:26:15 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.3ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mSpin Load (0.3ms)[0m  [1m[34mSELECT  "spins".* FROM "spins" WHERE "spins"."spin_candidate_id" = $1 LIMIT $2[0m  [["spin_candidate_id", 120679426], ["LIMIT", 1]]
Completed 500 Internal Server Error in 89ms (ActiveRecord: 4.0ms)


  
NoMethodError (undefined method `check' for nil:NilClass):
  
app/models/spin_candidate.rb:9:in `publish_spin'
app/controllers/v1/spin_candidates_controller.rb:92:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:27:46 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ErrorExchange (512.85ms)
  [1m[36mSpin Load (0.5ms)[0m  [1m[34mSELECT  "spins".* FROM "spins" WHERE "spins"."spin_candidate_id" = $1 LIMIT $2[0m  [["spin_candidate_id", 120679426], ["LIMIT", 1]]
Generating new connection to GitHub
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "spin_candidates" SET "validated" = $1, "validation_log" = $2, "updated_at" = $3 WHERE "spin_candidates"."id" = $4[0m  [["validated", "t"], ["validation_log", "[OK] Spin is validated"], ["updated_at", "2018-02-07 22:27:49.482241"], ["id", 120679426]]
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "spins" ("name", "full_name", "description", "clone_url", "html_url", "issues_url", "size", "gh_id", "gh_created_at", "gh_pushed_at", "gh_updated_at", "readme", "version", "metadata", "metadata_raw", "min_miq_version", "user_id", "created_at", "updated_at", "user_login", "releases", "spin_candidate_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22) RETURNING "id"[0m  [["name", "[\"manageiq-exchange-spin-template\", \"# Test repo for content in ManageIQ Exchange\\n\\nIn order to publish a Spin in ManageIQ Exchange you will need:\\n\\n - A file that identifies the repo as a manageiq-spin\\n ```.manageiq-spin```\\n - A metadata file with the right format (please see template comments in \\n ```metadata.yml```. Metadata format is validated.\\n - At least a [release](https://help.github.com/articles/creating-releases/) in the GitHub Repo. Please use vx.y.z as the release tag, except for betas or special test releases. For instance, v1.0.0\\n - A license that is identified in GitHub (use the add license)\\n\", \"aljesusg/manageiq-exchange-spin-template\", \"ManageIQ Example repo\", \"https://github.com/aljesusg/manageiq-exchange-spin-template.git\", \"https://github.com/aljesusg/manageiq-exchange-spin-template\", \"https://api.github.com/repos/aljesusg/manageiq-exchange-spin-template/issues\", 0, 0, 0, 0, 61, 120679426, 2018-02-07 22:24:40 UTC, 2018-02-06 15:58:05 UTC, 2018-02-05 12:47:32 UTC, false, \"master\", nil, nil, nil, nil, 7, {\"metadata_version\"=>1, \"description\"=>\"Description\", \"author\"=>\"Author Name\", \"company\"=>nil, \"min_miq_version\"=>\"h\", \"tags\"=>[\"demo\", \"open source\"]}]"], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["description", "ManageIQ Example repo"], ["clone_url", "https://github.com/aljesusg/manageiq-exchange-spin-template.git"], ["html_url", "https://github.com/aljesusg/manageiq-exchange-spin-template"], ["issues_url", "https://api.github.com/repos/aljesusg/manageiq-exchange-spin-template/issues"], ["size", 61], ["gh_id", "120679426"], ["gh_created_at", "2018-02-07 22:24:40"], ["gh_pushed_at", "2018-02-06 15:58:05"], ["gh_updated_at", "2018-02-05 12:47:32"], ["readme", "# Test repo for content in ManageIQ Exchange\n\nIn order to publish a Spin in ManageIQ Exchange you will need:\n\n - A file that identifies the repo as a manageiq-spin\n ```.manageiq-spin```\n - A metadata file with the right format (please see template comments in \n ```metadata.yml```. Metadata format is validated.\n - At least a [release](https://help.github.com/articles/creating-releases/) in the GitHub Repo. Please use vx.y.z as the release tag, except for betas or special test releases. For instance, v1.0.0\n - A license that is identified in GitHub (use the add license)\n"], ["version", nil], ["metadata", "{\"metadata_version\":1,\"description\":\"Description\",\"author\":\"Author Name\",\"company\":null,\"min_miq_version\":\"h\",\"tags\":[\"demo\",\"open source\"]}"], ["metadata_raw", "metadata_version: 1 # It must be 1\ndescription: \"Description\"\nauthor: \"Author Name\"\ncompany: #Optional\n\nmin_miq_version: \"h\"\n# A letter with the manageiq_version:\n# For Hammer, use \"h\"\n# For Gaprishdanvili, use \"g\"\n# Etc.\n\n# max_miq_version: \"h\"\n\ntags: ['demo','open source']\n# List tags for your spin here, one per line. A tag is a keyword that describes\n# and categorizes the spin. Users find spins by searching for tags. Be sure to\n# remove the '[]' above, if you add tags to this list.\n#\n# NOTE: A tag is limited to a single word comprised of alphanumeric characters.\n# Maximum 20 tags per spin.\n\n# Spin version\n# The spin version will be gathered from the releases tag in GitHub\n\n# Many licenses need an actual file to work. We use the License API from GitHub\n# Some suggested licenses to configure in the repo:\n# - BSD (default)\n# - MIT\n# - GPLv2\n# - GPLv3\n# - Apache\n# - CC-BY\n# - The Unlicense\n"], ["min_miq_version", 7], ["user_id", 3019213], ["created_at", "2018-02-07 22:27:49.484014"], ["updated_at", "2018-02-07 22:27:49.484014"], ["user_login", "aljesusg"], ["releases", "[[],{\"id\":3019213,\"name\":\"Alberto Gutierrez\",\"admin\":false,\"staff\":false,\"karma\":0,\"github_avatar_url\":\"https://avatars2.githubusercontent.com/u/3019213?v=4\",\"github_html_url\":\"https://github.com/aljesusg\",\"github_id\":\"3019213\",\"github_login\":\"aljesusg\",\"github_company\":\"@ManageIQ Red Hat, GDG\",\"github_type\":\"User\",\"github_blog\":\"\",\"github_location\":\"Granada,Spain\",\"github_bio\":\"\",\"github_created_at\":\"2012-12-11T19:52:55.000Z\",\"github_updated_at\":\"2018-01-27T15:58:25.000Z\",\"email\":\"aljesusg@gmail.com\",\"created_at\":\"2018-02-07T22:18:52.927Z\",\"updated_at\":\"2018-02-07T22:18:52.927Z\"},\"aljesusg\"]"], ["spin_candidate_id", 120679426]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "spins" SET "updated_at" = $1, "visible" = $2 WHERE "spins"."id" = $3[0m  [["updated_at", "2018-02-07 22:27:49.490899"], ["visible", "t"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 3064ms (Views: 515.1ms | ActiveRecord: 8.6ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/v1/api_controller.rb:37:in `return_response'
app/controllers/v1/spin_candidates_controller.rb:95:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:28:56 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ErrorExchange (0.13ms)
  [1m[36mSpin Load (2.2ms)[0m  [1m[34mSELECT  "spins".* FROM "spins" WHERE "spins"."spin_candidate_id" = $1 LIMIT $2[0m  [["spin_candidate_id", 120679426], ["LIMIT", 1]]
Generating new connection to GitHub
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 2422ms (Views: 2.2ms | ActiveRecord: 4.8ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/v1/api_controller.rb:37:in `return_response'
app/controllers/v1/spin_candidates_controller.rb:96:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:33:22 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ErrorExchange (0.15ms)
Completed 500 Internal Server Error in 61ms (Views: 2.8ms | ActiveRecord: 1.4ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:34:07 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (1.0ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Started GET "/spins_candidate" for 127.0.0.1 at 2018-02-07 23:35:59 +0100
Completed 500 Internal Server Error in 111854ms (ActiveRecord: 2.6ms)


  
SystemExit (exit):
  
(byebug):1:in `exit'
(byebug):1:in `publish'
app/controllers/v1/spin_candidates_controller.rb:106:in `publish'
  
ActionController::RoutingError (No route matches [GET] "/spins_candidate"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.4) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.4) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.2) lib/rack/cors.rb:97:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.2) lib/puma/configuration.rb:225:in `call'
puma (3.11.2) lib/puma/server.rb:624:in `handle_request'
puma (3.11.2) lib/puma/server.rb:438:in `process_client'
puma (3.11.2) lib/puma/server.rb:302:in `block in run'
puma (3.11.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/spin_candidates" for 127.0.0.1 at 2018-02-07 23:36:15 +0100
Processing by V1::SpinCandidatesController#index as HTML
Completed 401 Unauthorized in 20ms (ActiveRecord: 0.0ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:37:11 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (1.1ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
Completed 500 Internal Server Error in 640ms (ActiveRecord: 15.9ms)


  
SystemExit (exit):
  
(byebug):1:in `exit'
(byebug):1:in `publish'
app/controllers/v1/spin_candidates_controller.rb:97:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:37:32 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (1.1ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
Completed 500 Internal Server Error in 78ms (ActiveRecord: 2.5ms)


  
SystemExit (exit):
  
(byebug):1:in `exit'
(byebug):1:in `publish'
app/controllers/v1/spin_candidates_controller.rb:97:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:38:00 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (1.1ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (1.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ErrorExchange (3.53ms)
Completed 500 Internal Server Error in 882ms (Views: 51.9ms | ActiveRecord: 19.6ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:39:13 +0100
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ErrorExchange (448.8ms)
Completed 500 Internal Server Error in 709ms (Views: 453.1ms | ActiveRecord: 9.5ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:39:51 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ErrorExchange (0.15ms)
Completed 500 Internal Server Error in 67ms (Views: 3.0ms | ActiveRecord: 8.8ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:40:05 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.27ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:40:08 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)


Started POST "/v1/users/sign_in" for 127.0.0.1 at 2018-02-07 23:40:08 +0100
Processing by V1::Users::SessionsController#create as HTML
  Parameters: {"session"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Creating session, verifying code sent
Verifying that the user code is valid and authenticating user
Generating new connection to GitHub
Valid code, finding or creating user aljesusg
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Creating user session token
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."body" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["body", "cd9f0f96f609bfdf2b687f045234c45335e0fbe5aa31987428c4a92375a8d445"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "authentication_tokens" ("body", "user_id", "last_used_at", "ip_address", "user_agent", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["body", "cd9f0f96f609bfdf2b687f045234c45335e0fbe5aa31987428c4a92375a8d445"], ["user_id", 3019213], ["last_used_at", "2018-02-07 22:40:10.029377"], ["ip_address", "127.0.0.1"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36"], ["created_at", "2018-02-07 22:40:10.031398"], ["updated_at", "2018-02-07 22:40:10.031398"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "authentication_tokens" SET "updated_at" = $1, "github_token" = $2, "provider" = $3 WHERE "authentication_tokens"."id" = $4[0m  [["updated_at", "2018-02-07 22:40:10.035880"], ["github_token", "e66111a9bbe97826c0dba4ab1fcbcb21d73e7114"], ["provider", "github.com"], ["id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Returning user info and token
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.67ms)
Completed 200 OK in 1251ms (Views: 2.5ms | ActiveRecord: 3.4ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:40:11 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)


Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:40:11 +0100
Processing by V1::SpinCandidatesController#index as HTML
  Parameters: {"spin_candidate"=>{}}
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.8ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (1.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" LIMIT $1 OFFSET $2[0m  [["LIMIT", 20], ["OFFSET", 0]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (4.24ms)
Completed 200 OK in 33ms (Views: 24.6ms | ActiveRecord: 3.3ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:40:14 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ErrorExchange (0.15ms)
Completed 500 Internal Server Error in 7ms (Views: 0.6ms | ActiveRecord: 1.4ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:44:12 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mSpin Load (0.7ms)[0m  [1m[34mSELECT  "spins".* FROM "spins" WHERE "spins"."spin_candidate_id" = $1 LIMIT $2[0m  [["spin_candidate_id", 120679426], ["LIMIT", 1]]
Generating new connection to GitHub
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered V1::SpinCandidateSerializer with ActiveModelSerializers::Adapter::Json (0.92ms)
Completed 200 OK in 2543ms (Views: 7.0ms | ActiveRecord: 13.4ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (224.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_development"[0m
  [1m[35m (188.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_test"[0m
  [1m[35m (1364.9ms)[0m  [1m[35mCREATE DATABASE "exchange_development" ENCODING = 'unicode'[0m
  [1m[35m (448.2ms)[0m  [1m[35mCREATE DATABASE "exchange_test" ENCODING = 'unicode'[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6807691543073318205)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20171124111358)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying NOT NULL, "admin" boolean DEFAULT 'f' NOT NULL, "staff" boolean DEFAULT 'f' NOT NULL, "karma" integer DEFAULT 0 NOT NULL, "github_avatar_url" character varying DEFAULT '' NOT NULL, "github_html_url" character varying NOT NULL, "github_id" character varying NOT NULL, "github_login" character varying NOT NULL, "github_company" character varying DEFAULT '' NOT NULL, "github_type" character varying NOT NULL, "github_blog" character varying DEFAULT '' NOT NULL, "github_location" character varying DEFAULT '' NOT NULL, "github_bio" character varying DEFAULT '' NOT NULL, "github_created_at" timestamp NOT NULL, "github_updated_at" timestamp NOT NULL, "email" character varying DEFAULT '' NOT NULL, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_github_id" ON "users"  ("github_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171124111358"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAuthenticationTokens (20171129133214)
  [1m[35m (5.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.9ms)[0m  [1m[35mCREATE TABLE "authentication_tokens" ("id" bigserial primary key, "body" character varying, "user_id" bigint, "last_used_at" timestamp, "ip_address" character varying, "user_agent" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_ad331ebb27"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_authentication_tokens_on_user_id" ON "authentication_tokens"  ("user_id")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171129133214"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTags (20171130091259)
  [1m[35m (6.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.2ms)[0m  [1m[35mCREATE TABLE "tags" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_tags_on_name" ON "tags"  ("name")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171130091259"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpins (20171201125527)
  [1m[35m (6.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.1ms)[0m  [1m[35mCREATE TABLE "spins" ("id" bigserial primary key, "published" boolean DEFAULT 'f', "name" character varying, "full_name" text DEFAULT '', "description" text DEFAULT '', "clone_url" character varying, "html_url" character varying, "issues_url" character varying, "forks_count" integer DEFAULT 0, "stargazers_count" integer DEFAULT 0, "watchers_count" integer DEFAULT 0, "open_issues_count" integer DEFAULT 0, "size" integer DEFAULT 0, "gh_id" character varying, "gh_created_at" timestamp, "gh_pushed_at" timestamp, "gh_updated_at" timestamp, "gh_archived" boolean DEFAULT 'f', "default_branch" character varying DEFAULT 'master', "readme" text, "license_key" character varying, "license_name" character varying, "license_html_url" character varying, "version" character varying DEFAULT '0.0.0', "metadata" jsonb, "metadata_raw" text, "min_miq_version" integer DEFAULT 0, "first_import" timestamp, "score" float DEFAULT 0.0, "user_id" bigint, "company" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_1444c62c9c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_user_id" ON "spins"  ("user_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_published" ON "spins"  ("published")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201125527"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTaggings (20171201192400)
  [1m[35m (5.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "taggings" ("id" bigserial primary key, "spin_id" bigint, "tag_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_spin_id" ON "taggings"  ("spin_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_tag_id" ON "taggings"  ("tag_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201192400"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGitHubTokenToAuthenticationToken (20171205113330)
  [1m[35m (11.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.7ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "github_token" character varying[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171205113330"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUserLoginToSpins (20171219101016)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" ADD "user_login" character varying[0m
  [1m[36mSpin Load (0.6ms)[0m  [1m[34mSELECT "spins".* FROM "spins"[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171219101016"]]
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVisibleBooleanToSpin (20171227101711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (29.2ms)[0m  [1m[35mALTER TABLE "spins" ADD "visible" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171227101711"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLogToSpin (20171229101504)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" ADD "log" text[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171229101504"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddReleasesToSpin (20180111095609)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (25.4ms)[0m  [1m[35mALTER TABLE "spins" ADD "releases" jsonb DEFAULT '[]'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180111095609"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProviderToToken (20180129165753)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "provider" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180129165753"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to ModifyUserParameters (20180201092313)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mALTER TABLE "users" ALTER "name" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_avatar_url" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_avatar_url" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_html_url" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_id" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_login" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_company" DROP NOT NULL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_company" DROP DEFAULT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_type" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_blog" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_blog" DROP DEFAULT[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_location" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_location" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_bio" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_bio" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_created_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_updated_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "email" DROP NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "email" DROP DEFAULT[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180201092313"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpinCandidates (20180205163158)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.4ms)[0m  [1m[35mCREATE TABLE "spin_candidates" ("id" bigserial primary key, "full_name" text, "validation_log" text, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_07ac1d3d12"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_user_id" ON "spin_candidates"  ("user_id")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180205163158"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPublishedToSpinCandidate (20180206143819)
  [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "published" boolean[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_published" ON "spin_candidates"  ("published")[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "validated" boolean[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "last_validation" timestamp[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206143819"]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddSpinCandidateReferenceToSpin (20180206144300)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" ADD "spin_candidate_id" bigint[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_spin_candidate_id" ON "spins"  ("spin_candidate_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "spins" ADD CONSTRAINT "fk_rails_36c8a4ce1a"
FOREIGN KEY ("spin_candidate_id")
  REFERENCES "spin_candidates" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206144300"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveLogSpin (20180207112035)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.0ms)[0m  [1m[35mALTER TABLE "spins" DROP "log"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180207112035"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-02-07 22:45:15.016166"], ["updated_at", "2018-02-07 22:45:15.016166"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(6807691543073318205)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2018-02-07 23:46:16 +0100
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:46:21 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms)


Started POST "/v1/users/sign_in" for 127.0.0.1 at 2018-02-07 23:46:21 +0100
Processing by V1::Users::SessionsController#create as HTML
  Parameters: {"session"=>{}}
  [1m[36mUser Load (8.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Creating session, verifying code sent
Verifying that the user code is valid and authenticating user
Generating new connection to GitHub
Valid code, finding or creating user aljesusg
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("id", "name", "github_avatar_url", "github_html_url", "github_id", "github_login", "github_company", "github_type", "github_blog", "github_location", "github_bio", "github_created_at", "github_updated_at", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["id", 3019213], ["name", "Alberto Gutierrez"], ["github_avatar_url", "https://avatars2.githubusercontent.com/u/3019213?v=4"], ["github_html_url", "https://github.com/aljesusg"], ["github_id", "3019213"], ["github_login", "aljesusg"], ["github_company", "@ManageIQ Red Hat, GDG"], ["github_type", "User"], ["github_blog", ""], ["github_location", "Granada,Spain"], ["github_bio", ""], ["github_created_at", "2012-12-11 19:52:55"], ["github_updated_at", "2018-01-27 15:58:25"], ["email", "aljesusg@gmail.com"], ["created_at", "2018-02-07 22:46:22.876722"], ["updated_at", "2018-02-07 22:46:22.876722"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Creating user session token
  [1m[36mAuthenticationToken Load (2.7ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."body" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["body", "5151c85e121128c55e815a543478714d0e0c8a3b82d588274f3749969478e41f"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "authentication_tokens" ("body", "user_id", "last_used_at", "ip_address", "user_agent", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["body", "5151c85e121128c55e815a543478714d0e0c8a3b82d588274f3749969478e41f"], ["user_id", 3019213], ["last_used_at", "2018-02-07 22:46:23.083325"], ["ip_address", "127.0.0.1"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36"], ["created_at", "2018-02-07 22:46:23.098878"], ["updated_at", "2018-02-07 22:46:23.098878"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "authentication_tokens" SET "updated_at" = $1, "github_token" = $2, "provider" = $3 WHERE "authentication_tokens"."id" = $4[0m  [["updated_at", "2018-02-07 22:46:23.113000"], ["github_token", "6a0e4a750f7721d7f78d72cd4d0de4d166cec013"], ["provider", "github.com"], ["id", 1]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
Returning user info and token
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.56ms)
Completed 200 OK in 1545ms (Views: 2.5ms | ActiveRecord: 32.9ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:46:25 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)


Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:46:25 +0100
Processing by V1::SpinCandidatesController#index as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
Completed 204 No Content in 21ms (Views: 0.1ms | ActiveRecord: 3.6ms)


Started POST "/v1/spin_candidates/refresh" for 127.0.0.1 at 2018-02-07 23:46:28 +0100
Processing by V1::SpinCandidatesController#refresh as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] Enqueued RefreshSpinCandidatesJob (Job ID: d48457af-0b4f-43d8-ac22-1bc004e18304) to Async(default) with arguments: {:user=>#<GlobalID:0x007fc24888f2b8 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"yy1j-r2Hzsa5KGcnSwXP"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 202 Accepted in 32ms (Views: 1.4ms | ActiveRecord: 0.5ms)


  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304] Performing RefreshSpinCandidatesJob (Job ID: d48457af-0b4f-43d8-ac22-1bc004e18304) from Async(default) with arguments: {:user=>#<GlobalID:0x007fc242d83360 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"yy1j-r2Hzsa5KGcnSwXP"}
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304] Refresh Spin Candidates Job for user: 3019213
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304]   [1m[36mAuthenticationToken Load (0.9ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304]   [1m[36mCACHE AuthenticationToken Load (0.0ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304] Generating new connection to GitHub
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304]   [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304]   [1m[36mSpinCandidate Load (0.3ms)[0m  [1m[34mSELECT "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304]   [1m[36mSpin Load (0.5ms)[0m  [1m[34mSELECT "spins".* FROM "spins" WHERE 1=0[0m
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304]   [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "spin_candidates" ("id", "full_name", "validation_log", "user_id", "created_at", "updated_at", "published", "validated") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["id", 120679426], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["validation_log", "Pending validation"], ["user_id", 3019213], ["created_at", "2018-02-07 22:46:46.411860"], ["updated_at", "2018-02-07 22:46:46.411860"], ["published", "f"], ["validated", "f"]]
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [RefreshSpinCandidatesJob] [d48457af-0b4f-43d8-ac22-1bc004e18304] Performed RefreshSpinCandidatesJob (Job ID: d48457af-0b4f-43d8-ac22-1bc004e18304) from Async(default) in 18148.31ms
Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:47:25 +0100
Started GET "/" for 127.0.0.1 at 2018-02-07 23:47:25 +0100
Processing by V1::SpinCandidatesController#index as HTML
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)


  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[36mSpinCandidate Load (0.5ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" LIMIT $1 OFFSET $2[0m  [["LIMIT", 20], ["OFFSET", 0]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (2.7ms)
Completed 200 OK in 26ms (Views: 14.4ms | ActiveRecord: 2.0ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:47:29 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Completed 204 No Content in 6ms (ActiveRecord: 1.0ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:47:50 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "api"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Completed 204 No Content in 5ms (ActiveRecord: 1.0ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:48:20 +0100
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
Completed 500 Internal Server Error in 292ms (ActiveRecord: 8.5ms)


  
NameError (undefined local variable or method `byebug∫' for #<V1::SpinCandidatesController:0x007f8b865d9198>):
  
app/controllers/v1/spin_candidates_controller.rb:96:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:48:32 +0100
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.7ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mSpin Load (0.8ms)[0m  [1m[34mSELECT  "spins".* FROM "spins" WHERE "spins"."spin_candidate_id" = $1 LIMIT $2[0m  [["spin_candidate_id", 120679426], ["LIMIT", 1]]
Generating new connection to GitHub
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "spin_candidates" SET "validated" = $1, "validation_log" = $2, "updated_at" = $3 WHERE "spin_candidates"."id" = $4[0m  [["validated", "t"], ["validation_log", "[OK] Spin is validated"], ["updated_at", "2018-02-07 22:48:57.964292"], ["id", 120679426]]
  [1m[35mSQL (13.1ms)[0m  [1m[32mINSERT INTO "spins" ("name", "full_name", "description", "clone_url", "html_url", "issues_url", "size", "gh_id", "gh_created_at", "gh_pushed_at", "gh_updated_at", "readme", "version", "metadata", "metadata_raw", "min_miq_version", "user_id", "created_at", "updated_at", "user_login", "releases", "spin_candidate_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22) RETURNING "id"[0m  [["name", "[\"manageiq-exchange-spin-template\", \"# Test repo for content in ManageIQ Exchange\\n\\nIn order to publish a Spin in ManageIQ Exchange you will need:\\n\\n - A file that identifies the repo as a manageiq-spin\\n ```.manageiq-spin```\\n - A metadata file with the right format (please see template comments in \\n ```metadata.yml```. Metadata format is validated.\\n - At least a [release](https://help.github.com/articles/creating-releases/) in the GitHub Repo. Please use vx.y.z as the release tag, except for betas or special test releases. For instance, v1.0.0\\n - A license that is identified in GitHub (use the add license)\\n\", \"aljesusg/manageiq-exchange-spin-template\", \"ManageIQ Example repo\", \"https://github.com/aljesusg/manageiq-exchange-spin-template.git\", \"https://github.com/aljesusg/manageiq-exchange-spin-template\", \"https://api.github.com/repos/aljesusg/manageiq-exchange-spin-template/issues\", 0, 0, 0, 0, 61, 120679426, 2018-02-07 22:24:40 UTC, 2018-02-06 15:58:05 UTC, 2018-02-05 12:47:32 UTC, false, \"master\", nil, nil, nil, nil, 7, {\"metadata_version\"=>1, \"description\"=>\"Description\", \"author\"=>\"Author Name\", \"company\"=>nil, \"min_miq_version\"=>\"h\", \"tags\"=>[\"demo\", \"open source\"]}]"], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["description", "ManageIQ Example repo"], ["clone_url", "https://github.com/aljesusg/manageiq-exchange-spin-template.git"], ["html_url", "https://github.com/aljesusg/manageiq-exchange-spin-template"], ["issues_url", "https://api.github.com/repos/aljesusg/manageiq-exchange-spin-template/issues"], ["size", 61], ["gh_id", "120679426"], ["gh_created_at", "2018-02-07 22:24:40"], ["gh_pushed_at", "2018-02-06 15:58:05"], ["gh_updated_at", "2018-02-05 12:47:32"], ["readme", "# Test repo for content in ManageIQ Exchange\n\nIn order to publish a Spin in ManageIQ Exchange you will need:\n\n - A file that identifies the repo as a manageiq-spin\n ```.manageiq-spin```\n - A metadata file with the right format (please see template comments in \n ```metadata.yml```. Metadata format is validated.\n - At least a [release](https://help.github.com/articles/creating-releases/) in the GitHub Repo. Please use vx.y.z as the release tag, except for betas or special test releases. For instance, v1.0.0\n - A license that is identified in GitHub (use the add license)\n"], ["version", nil], ["metadata", "{\"metadata_version\":1,\"description\":\"Description\",\"author\":\"Author Name\",\"company\":null,\"min_miq_version\":\"h\",\"tags\":[\"demo\",\"open source\"]}"], ["metadata_raw", "metadata_version: 1 # It must be 1\ndescription: \"Description\"\nauthor: \"Author Name\"\ncompany: #Optional\n\nmin_miq_version: \"h\"\n# A letter with the manageiq_version:\n# For Hammer, use \"h\"\n# For Gaprishdanvili, use \"g\"\n# Etc.\n\n# max_miq_version: \"h\"\n\ntags: ['demo','open source']\n# List tags for your spin here, one per line. A tag is a keyword that describes\n# and categorizes the spin. Users find spins by searching for tags. Be sure to\n# remove the '[]' above, if you add tags to this list.\n#\n# NOTE: A tag is limited to a single word comprised of alphanumeric characters.\n# Maximum 20 tags per spin.\n\n# Spin version\n# The spin version will be gathered from the releases tag in GitHub\n\n# Many licenses need an actual file to work. We use the License API from GitHub\n# Some suggested licenses to configure in the repo:\n# - BSD (default)\n# - MIT\n# - GPLv2\n# - GPLv3\n# - Apache\n# - CC-BY\n# - The Unlicense\n"], ["min_miq_version", 7], ["user_id", 3019213], ["created_at", "2018-02-07 22:48:57.976818"], ["updated_at", "2018-02-07 22:48:57.976818"], ["user_login", "aljesusg"], ["releases", "[[],{\"id\":3019213,\"name\":\"Alberto Gutierrez\",\"admin\":false,\"staff\":false,\"karma\":0,\"github_avatar_url\":\"https://avatars2.githubusercontent.com/u/3019213?v=4\",\"github_html_url\":\"https://github.com/aljesusg\",\"github_id\":\"3019213\",\"github_login\":\"aljesusg\",\"github_company\":\"@ManageIQ Red Hat, GDG\",\"github_type\":\"User\",\"github_blog\":\"\",\"github_location\":\"Granada,Spain\",\"github_bio\":\"\",\"github_created_at\":\"2012-12-11T19:52:55.000Z\",\"github_updated_at\":\"2018-01-27T15:58:25.000Z\",\"email\":\"aljesusg@gmail.com\",\"created_at\":\"2018-02-07T22:46:22.876Z\",\"updated_at\":\"2018-02-07T22:46:22.876Z\"},\"aljesusg\"]"], ["spin_candidate_id", 120679426]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "spins" SET "updated_at" = $1, "visible" = $2 WHERE "spins"."id" = $3[0m  [["updated_at", "2018-02-07 22:48:58.028308"], ["visible", "t"], ["id", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered V1::SpinCandidateSerializer with ActiveModelSerializers::Adapter::Json (16.38ms)
Completed 200 OK in 33655ms (Views: 30.4ms | ActiveRecord: 38.6ms)


  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (188.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_development"[0m
  [1m[35m (197.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_test"[0m
  [1m[35m (397.2ms)[0m  [1m[35mCREATE DATABASE "exchange_development" ENCODING = 'unicode'[0m
  [1m[35m (391.1ms)[0m  [1m[35mCREATE DATABASE "exchange_test" ENCODING = 'unicode'[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6807691543073318205)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20171124111358)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying NOT NULL, "admin" boolean DEFAULT 'f' NOT NULL, "staff" boolean DEFAULT 'f' NOT NULL, "karma" integer DEFAULT 0 NOT NULL, "github_avatar_url" character varying DEFAULT '' NOT NULL, "github_html_url" character varying NOT NULL, "github_id" character varying NOT NULL, "github_login" character varying NOT NULL, "github_company" character varying DEFAULT '' NOT NULL, "github_type" character varying NOT NULL, "github_blog" character varying DEFAULT '' NOT NULL, "github_location" character varying DEFAULT '' NOT NULL, "github_bio" character varying DEFAULT '' NOT NULL, "github_created_at" timestamp NOT NULL, "github_updated_at" timestamp NOT NULL, "email" character varying DEFAULT '' NOT NULL, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_github_id" ON "users"  ("github_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171124111358"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAuthenticationTokens (20171129133214)
  [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.9ms)[0m  [1m[35mCREATE TABLE "authentication_tokens" ("id" bigserial primary key, "body" character varying, "user_id" bigint, "last_used_at" timestamp, "ip_address" character varying, "user_agent" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_ad331ebb27"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_authentication_tokens_on_user_id" ON "authentication_tokens"  ("user_id")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171129133214"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTags (20171130091259)
  [1m[35m (5.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.9ms)[0m  [1m[35mCREATE TABLE "tags" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_tags_on_name" ON "tags"  ("name")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171130091259"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpins (20171201125527)
  [1m[35m (6.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.5ms)[0m  [1m[35mCREATE TABLE "spins" ("id" bigserial primary key, "published" boolean DEFAULT 'f', "name" character varying, "full_name" text DEFAULT '', "description" text DEFAULT '', "clone_url" character varying, "html_url" character varying, "issues_url" character varying, "forks_count" integer DEFAULT 0, "stargazers_count" integer DEFAULT 0, "watchers_count" integer DEFAULT 0, "open_issues_count" integer DEFAULT 0, "size" integer DEFAULT 0, "gh_id" character varying, "gh_created_at" timestamp, "gh_pushed_at" timestamp, "gh_updated_at" timestamp, "gh_archived" boolean DEFAULT 'f', "default_branch" character varying DEFAULT 'master', "readme" text, "license_key" character varying, "license_name" character varying, "license_html_url" character varying, "version" character varying DEFAULT '0.0.0', "metadata" jsonb, "metadata_raw" text, "min_miq_version" integer DEFAULT 0, "first_import" timestamp, "score" float DEFAULT 0.0, "user_id" bigint, "company" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_1444c62c9c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_user_id" ON "spins"  ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_published" ON "spins"  ("published")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201125527"]]
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTaggings (20171201192400)
  [1m[35m (5.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "taggings" ("id" bigserial primary key, "spin_id" bigint, "tag_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_spin_id" ON "taggings"  ("spin_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_tag_id" ON "taggings"  ("tag_id")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201192400"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGitHubTokenToAuthenticationToken (20171205113330)
  [1m[35m (10.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "github_token" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171205113330"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUserLoginToSpins (20171219101016)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "spins" ADD "user_login" character varying[0m
  [1m[36mSpin Load (0.7ms)[0m  [1m[34mSELECT "spins".* FROM "spins"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171219101016"]]
  [1m[35m (15.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVisibleBooleanToSpin (20171227101711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (26.6ms)[0m  [1m[35mALTER TABLE "spins" ADD "visible" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171227101711"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLogToSpin (20171229101504)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" ADD "log" text[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171229101504"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddReleasesToSpin (20180111095609)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (26.1ms)[0m  [1m[35mALTER TABLE "spins" ADD "releases" jsonb DEFAULT '[]'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180111095609"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProviderToToken (20180129165753)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "provider" character varying[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180129165753"]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ModifyUserParameters (20180201092313)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER "name" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_avatar_url" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_avatar_url" DROP DEFAULT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_html_url" DROP DEFAULT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_id" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_login" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_company" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_company" DROP DEFAULT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_type" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_blog" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_blog" DROP DEFAULT[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_location" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_location" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_bio" DROP NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_bio" DROP DEFAULT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_created_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_updated_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "email" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "email" DROP DEFAULT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180201092313"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpinCandidates (20180205163158)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.1ms)[0m  [1m[35mCREATE TABLE "spin_candidates" ("id" bigserial primary key, "full_name" text, "validation_log" text, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_07ac1d3d12"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (31.8ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_user_id" ON "spin_candidates"  ("user_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180205163158"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPublishedToSpinCandidate (20180206143819)
  [1m[35m (10.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "published" boolean[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_published" ON "spin_candidates"  ("published")[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "validated" boolean[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "last_validation" timestamp[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206143819"]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddSpinCandidateReferenceToSpin (20180206144300)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "spins" ADD "spin_candidate_id" bigint[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_spin_candidate_id" ON "spins"  ("spin_candidate_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "spins" ADD CONSTRAINT "fk_rails_36c8a4ce1a"
FOREIGN KEY ("spin_candidate_id")
  REFERENCES "spin_candidates" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206144300"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveLogSpin (20180207112035)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "spins" DROP "log"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180207112035"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-02-07 22:49:31.631013"], ["updated_at", "2018-02-07 22:49:31.631013"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(6807691543073318205)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2018-02-07 23:50:11 +0100
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.36ms)
Completed 200 OK in 8ms (Views: 7.9ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:50:18 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.33ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:50:22 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms)


Started POST "/v1/users/sign_in" for 127.0.0.1 at 2018-02-07 23:50:22 +0100
Processing by V1::Users::SessionsController#create as HTML
  Parameters: {"session"=>{}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Creating session, verifying code sent
Verifying that the user code is valid and authenticating user
Generating new connection to GitHub
Valid code, finding or creating user aljesusg
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("id", "name", "github_avatar_url", "github_html_url", "github_id", "github_login", "github_company", "github_type", "github_blog", "github_location", "github_bio", "github_created_at", "github_updated_at", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["id", 3019213], ["name", "Alberto Gutierrez"], ["github_avatar_url", "https://avatars2.githubusercontent.com/u/3019213?v=4"], ["github_html_url", "https://github.com/aljesusg"], ["github_id", "3019213"], ["github_login", "aljesusg"], ["github_company", "@ManageIQ Red Hat, GDG"], ["github_type", "User"], ["github_blog", ""], ["github_location", "Granada,Spain"], ["github_bio", ""], ["github_created_at", "2012-12-11 19:52:55"], ["github_updated_at", "2018-01-27 15:58:25"], ["email", "aljesusg@gmail.com"], ["created_at", "2018-02-07 22:50:23.902586"], ["updated_at", "2018-02-07 22:50:23.902586"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Creating user session token
  [1m[36mAuthenticationToken Load (0.6ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."body" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["body", "a3872dfaba9a7e6d12335f1ff7c6c323cd3b40606f41593069207b8448f7ea3b"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "authentication_tokens" ("body", "user_id", "last_used_at", "ip_address", "user_agent", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["body", "a3872dfaba9a7e6d12335f1ff7c6c323cd3b40606f41593069207b8448f7ea3b"], ["user_id", 3019213], ["last_used_at", "2018-02-07 22:50:24.097629"], ["ip_address", "127.0.0.1"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36"], ["created_at", "2018-02-07 22:50:24.116526"], ["updated_at", "2018-02-07 22:50:24.116526"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "authentication_tokens" SET "updated_at" = $1, "github_token" = $2, "provider" = $3 WHERE "authentication_tokens"."id" = $4[0m  [["updated_at", "2018-02-07 22:50:24.123393"], ["github_token", "4f36dc68b02434f22d8bfbb5d88eb5a95c136ab1"], ["provider", "github.com"], ["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Returning user info and token
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.51ms)
Completed 200 OK in 1523ms (Views: 2.4ms | ActiveRecord: 12.4ms)


Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:50:26 +0100
Processing by V1::SpinCandidatesController#index as HTML
Started GET "/" for 127.0.0.1 at 2018-02-07 23:50:26 +0100
  Parameters: {"api"=>{}}
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.37ms)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms)


  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
Completed 204 No Content in 23ms (Views: 0.1ms | ActiveRecord: 5.9ms)


Started POST "/v1/spin_candidates/refresh" for 127.0.0.1 at 2018-02-07 23:50:30 +0100
Processing by V1::SpinCandidatesController#refresh as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] Enqueued RefreshSpinCandidatesJob (Job ID: 9da8d2f5-c74b-4c30-bc4c-0db211ff9723) to Async(default) with arguments: {:user=>#<GlobalID:0x007ff6efe1d668 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"f2WcGff8Nay8DmNUF_XW"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 202 Accepted in 26ms (Views: 1.4ms | ActiveRecord: 0.6ms)


  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723] Performing RefreshSpinCandidatesJob (Job ID: 9da8d2f5-c74b-4c30-bc4c-0db211ff9723) from Async(default) with arguments: {:user=>#<GlobalID:0x007ff6f5031238 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"f2WcGff8Nay8DmNUF_XW"}
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723] Refresh Spin Candidates Job for user: 3019213
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723]   [1m[36mAuthenticationToken Load (0.8ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723]   [1m[36mCACHE AuthenticationToken Load (0.0ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723] Generating new connection to GitHub
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723]   [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723]   [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723]   [1m[36mSpin Load (0.6ms)[0m  [1m[34mSELECT "spins".* FROM "spins" WHERE 1=0[0m
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723]   [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "spin_candidates" ("id", "full_name", "validation_log", "user_id", "created_at", "updated_at", "published", "validated") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["id", 120679426], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["validation_log", "Pending validation"], ["user_id", 3019213], ["created_at", "2018-02-07 22:50:48.418841"], ["updated_at", "2018-02-07 22:50:48.418841"], ["published", "f"], ["validated", "f"]]
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723]   [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [RefreshSpinCandidatesJob] [9da8d2f5-c74b-4c30-bc4c-0db211ff9723] Performed RefreshSpinCandidatesJob (Job ID: 9da8d2f5-c74b-4c30-bc4c-0db211ff9723) from Async(default) in 18253.69ms
Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:50:51 +0100
Started GET "/" for 127.0.0.1 at 2018-02-07 23:50:51 +0100
Processing by V1::SpinCandidatesController#index as HTML
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms)


  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.5ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[36mSpinCandidate Load (0.6ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" LIMIT $1 OFFSET $2[0m  [["LIMIT", 20], ["OFFSET", 0]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (3.03ms)
Completed 200 OK in 28ms (Views: 15.5ms | ActiveRecord: 2.8ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:50:54 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "api"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.3ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Completed 204 No Content in 7ms (ActiveRecord: 1.1ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:51:07 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "api"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Completed 204 No Content in 5ms (ActiveRecord: 1.1ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:51:11 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Completed 204 No Content in 5ms (ActiveRecord: 1.1ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:52:40 +0100
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Completed 204 No Content in 245ms (ActiveRecord: 10.0ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:52:52 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
Completed 500 Internal Server Error in 8014ms (ActiveRecord: 6.9ms)


  
SystemExit (exit):
  
(byebug):1:in `exit'
(byebug):1:in `publish'
app/controllers/v1/spin_candidates_controller.rb:97:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:53:28 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (1.0ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
Completed 500 Internal Server Error in 445ms (ActiveRecord: 17.2ms)


  
TypeError (no implicit conversion of User into String):
  
app/controllers/v1/spin_candidates_controller.rb:96:in `+'
app/controllers/v1/spin_candidates_controller.rb:96:in `publish'
Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:53:45 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "spin_candidate"=>{}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (1.1ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (1.1ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mSpin Load (1.2ms)[0m  [1m[34mSELECT  "spins".* FROM "spins" WHERE "spins"."spin_candidate_id" = $1 LIMIT $2[0m  [["spin_candidate_id", 120679426], ["LIMIT", 1]]
Generating new connection to GitHub
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "spin_candidates" SET "validated" = $1, "validation_log" = $2, "updated_at" = $3 WHERE "spin_candidates"."id" = $4[0m  [["validated", "t"], ["validation_log", "[OK] Spin is validated"], ["updated_at", "2018-02-07 22:53:49.725034"], ["id", 120679426]]
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "spins" ("name", "full_name", "description", "clone_url", "html_url", "issues_url", "size", "gh_id", "gh_created_at", "gh_pushed_at", "gh_updated_at", "readme", "version", "metadata", "metadata_raw", "min_miq_version", "user_id", "created_at", "updated_at", "user_login", "releases", "spin_candidate_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22) RETURNING "id"[0m  [["name", "[\"manageiq-exchange-spin-template\", \"# Test repo for content in ManageIQ Exchange\\n\\nIn order to publish a Spin in ManageIQ Exchange you will need:\\n\\n - A file that identifies the repo as a manageiq-spin\\n ```.manageiq-spin```\\n - A metadata file with the right format (please see template comments in \\n ```metadata.yml```. Metadata format is validated.\\n - At least a [release](https://help.github.com/articles/creating-releases/) in the GitHub Repo. Please use vx.y.z as the release tag, except for betas or special test releases. For instance, v1.0.0\\n - A license that is identified in GitHub (use the add license)\\n\", \"aljesusg/manageiq-exchange-spin-template\", \"ManageIQ Example repo\", \"https://github.com/aljesusg/manageiq-exchange-spin-template.git\", \"https://github.com/aljesusg/manageiq-exchange-spin-template\", \"https://api.github.com/repos/aljesusg/manageiq-exchange-spin-template/issues\", 0, 0, 0, 0, 61, 120679426, 2018-02-07 22:24:40 UTC, 2018-02-06 15:58:05 UTC, 2018-02-05 12:47:32 UTC, false, \"master\", nil, nil, nil, nil, 7, {\"metadata_version\"=>1, \"description\"=>\"Description\", \"author\"=>\"Author Name\", \"company\"=>nil, \"min_miq_version\"=>\"h\", \"tags\"=>[\"demo\", \"open source\"]}]"], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["description", "ManageIQ Example repo"], ["clone_url", "https://github.com/aljesusg/manageiq-exchange-spin-template.git"], ["html_url", "https://github.com/aljesusg/manageiq-exchange-spin-template"], ["issues_url", "https://api.github.com/repos/aljesusg/manageiq-exchange-spin-template/issues"], ["size", 61], ["gh_id", "120679426"], ["gh_created_at", "2018-02-07 22:24:40"], ["gh_pushed_at", "2018-02-06 15:58:05"], ["gh_updated_at", "2018-02-05 12:47:32"], ["readme", "# Test repo for content in ManageIQ Exchange\n\nIn order to publish a Spin in ManageIQ Exchange you will need:\n\n - A file that identifies the repo as a manageiq-spin\n ```.manageiq-spin```\n - A metadata file with the right format (please see template comments in \n ```metadata.yml```. Metadata format is validated.\n - At least a [release](https://help.github.com/articles/creating-releases/) in the GitHub Repo. Please use vx.y.z as the release tag, except for betas or special test releases. For instance, v1.0.0\n - A license that is identified in GitHub (use the add license)\n"], ["version", nil], ["metadata", "{\"metadata_version\":1,\"description\":\"Description\",\"author\":\"Author Name\",\"company\":null,\"min_miq_version\":\"h\",\"tags\":[\"demo\",\"open source\"]}"], ["metadata_raw", "metadata_version: 1 # It must be 1\ndescription: \"Description\"\nauthor: \"Author Name\"\ncompany: #Optional\n\nmin_miq_version: \"h\"\n# A letter with the manageiq_version:\n# For Hammer, use \"h\"\n# For Gaprishdanvili, use \"g\"\n# Etc.\n\n# max_miq_version: \"h\"\n\ntags: ['demo','open source']\n# List tags for your spin here, one per line. A tag is a keyword that describes\n# and categorizes the spin. Users find spins by searching for tags. Be sure to\n# remove the '[]' above, if you add tags to this list.\n#\n# NOTE: A tag is limited to a single word comprised of alphanumeric characters.\n# Maximum 20 tags per spin.\n\n# Spin version\n# The spin version will be gathered from the releases tag in GitHub\n\n# Many licenses need an actual file to work. We use the License API from GitHub\n# Some suggested licenses to configure in the repo:\n# - BSD (default)\n# - MIT\n# - GPLv2\n# - GPLv3\n# - Apache\n# - CC-BY\n# - The Unlicense\n"], ["min_miq_version", 7], ["user_id", 3019213], ["created_at", "2018-02-07 22:53:49.755190"], ["updated_at", "2018-02-07 22:53:49.755190"], ["user_login", "aljesusg"], ["releases", "[[],{\"id\":3019213,\"name\":\"Alberto Gutierrez\",\"admin\":false,\"staff\":false,\"karma\":0,\"github_avatar_url\":\"https://avatars2.githubusercontent.com/u/3019213?v=4\",\"github_html_url\":\"https://github.com/aljesusg\",\"github_id\":\"3019213\",\"github_login\":\"aljesusg\",\"github_company\":\"@ManageIQ Red Hat, GDG\",\"github_type\":\"User\",\"github_blog\":\"\",\"github_location\":\"Granada,Spain\",\"github_bio\":\"\",\"github_created_at\":\"2012-12-11T19:52:55.000Z\",\"github_updated_at\":\"2018-01-27T15:58:25.000Z\",\"email\":\"aljesusg@gmail.com\",\"created_at\":\"2018-02-07T22:50:23.902Z\",\"updated_at\":\"2018-02-07T22:50:23.902Z\"},\"aljesusg\"]"], ["spin_candidate_id", 120679426]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "spins" SET "updated_at" = $1, "visible" = $2 WHERE "spins"."id" = $3[0m  [["updated_at", "2018-02-07 22:53:49.841289"], ["visible", "t"], ["id", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered V1::SpinCandidateSerializer with ActiveModelSerializers::Adapter::Json (23.71ms)
Completed 200 OK in 3637ms (Views: 49.4ms | ActiveRecord: 33.8ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (184.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_development"[0m
  [1m[35m (187.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_test"[0m
  [1m[35m (384.9ms)[0m  [1m[35mCREATE DATABASE "exchange_development" ENCODING = 'unicode'[0m
  [1m[35m (395.3ms)[0m  [1m[35mCREATE DATABASE "exchange_test" ENCODING = 'unicode'[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6807691543073318205)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20171124111358)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying NOT NULL, "admin" boolean DEFAULT 'f' NOT NULL, "staff" boolean DEFAULT 'f' NOT NULL, "karma" integer DEFAULT 0 NOT NULL, "github_avatar_url" character varying DEFAULT '' NOT NULL, "github_html_url" character varying NOT NULL, "github_id" character varying NOT NULL, "github_login" character varying NOT NULL, "github_company" character varying DEFAULT '' NOT NULL, "github_type" character varying NOT NULL, "github_blog" character varying DEFAULT '' NOT NULL, "github_location" character varying DEFAULT '' NOT NULL, "github_bio" character varying DEFAULT '' NOT NULL, "github_created_at" timestamp NOT NULL, "github_updated_at" timestamp NOT NULL, "email" character varying DEFAULT '' NOT NULL, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_github_id" ON "users"  ("github_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171124111358"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAuthenticationTokens (20171129133214)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "authentication_tokens" ("id" bigserial primary key, "body" character varying, "user_id" bigint, "last_used_at" timestamp, "ip_address" character varying, "user_agent" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_ad331ebb27"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_authentication_tokens_on_user_id" ON "authentication_tokens"  ("user_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171129133214"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTags (20171130091259)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "tags" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_tags_on_name" ON "tags"  ("name")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171130091259"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpins (20171201125527)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "spins" ("id" bigserial primary key, "published" boolean DEFAULT 'f', "name" character varying, "full_name" text DEFAULT '', "description" text DEFAULT '', "clone_url" character varying, "html_url" character varying, "issues_url" character varying, "forks_count" integer DEFAULT 0, "stargazers_count" integer DEFAULT 0, "watchers_count" integer DEFAULT 0, "open_issues_count" integer DEFAULT 0, "size" integer DEFAULT 0, "gh_id" character varying, "gh_created_at" timestamp, "gh_pushed_at" timestamp, "gh_updated_at" timestamp, "gh_archived" boolean DEFAULT 'f', "default_branch" character varying DEFAULT 'master', "readme" text, "license_key" character varying, "license_name" character varying, "license_html_url" character varying, "version" character varying DEFAULT '0.0.0', "metadata" jsonb, "metadata_raw" text, "min_miq_version" integer DEFAULT 0, "first_import" timestamp, "score" float DEFAULT 0.0, "user_id" bigint, "company" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_1444c62c9c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_user_id" ON "spins"  ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_published" ON "spins"  ("published")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201125527"]]
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTaggings (20171201192400)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "taggings" ("id" bigserial primary key, "spin_id" bigint, "tag_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_spin_id" ON "taggings"  ("spin_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_tag_id" ON "taggings"  ("tag_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201192400"]]
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGitHubTokenToAuthenticationToken (20171205113330)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "github_token" character varying[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171205113330"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUserLoginToSpins (20171219101016)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" ADD "user_login" character varying[0m
  [1m[36mSpin Load (0.6ms)[0m  [1m[34mSELECT "spins".* FROM "spins"[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171219101016"]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVisibleBooleanToSpin (20171227101711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "spins" ADD "visible" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171227101711"]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLogToSpin (20171229101504)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" ADD "log" text[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171229101504"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddReleasesToSpin (20180111095609)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "spins" ADD "releases" jsonb DEFAULT '[]'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180111095609"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProviderToToken (20180129165753)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "provider" character varying[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180129165753"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to ModifyUserParameters (20180201092313)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "name" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_avatar_url" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_avatar_url" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_html_url" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_id" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_login" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_company" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_company" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_type" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_blog" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_blog" DROP DEFAULT[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_location" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_location" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_bio" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_bio" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_created_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_updated_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "email" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "email" DROP DEFAULT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180201092313"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpinCandidates (20180205163158)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "spin_candidates" ("id" bigserial primary key, "full_name" text, "validation_log" text, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_07ac1d3d12"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_user_id" ON "spin_candidates"  ("user_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180205163158"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPublishedToSpinCandidate (20180206143819)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "published" boolean[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_published" ON "spin_candidates"  ("published")[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "validated" boolean[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "last_validation" timestamp[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206143819"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddSpinCandidateReferenceToSpin (20180206144300)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spins" ADD "spin_candidate_id" bigint[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_spin_candidate_id" ON "spins"  ("spin_candidate_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "spins" ADD CONSTRAINT "fk_rails_36c8a4ce1a"
FOREIGN KEY ("spin_candidate_id")
  REFERENCES "spin_candidates" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206144300"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveLogSpin (20180207112035)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" DROP "log"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180207112035"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-02-07 22:54:08.812710"], ["updated_at", "2018-02-07 22:54:08.812710"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(6807691543073318205)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (185.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_development"[0m
  [1m[35m (180.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_test"[0m
  [1m[35m (365.0ms)[0m  [1m[35mCREATE DATABASE "exchange_development" ENCODING = 'unicode'[0m
  [1m[35m (374.5ms)[0m  [1m[35mCREATE DATABASE "exchange_test" ENCODING = 'unicode'[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6807691543073318205)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20171124111358)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying NOT NULL, "admin" boolean DEFAULT 'f' NOT NULL, "staff" boolean DEFAULT 'f' NOT NULL, "karma" integer DEFAULT 0 NOT NULL, "github_avatar_url" character varying DEFAULT '' NOT NULL, "github_html_url" character varying NOT NULL, "github_id" character varying NOT NULL, "github_login" character varying NOT NULL, "github_company" character varying DEFAULT '' NOT NULL, "github_type" character varying NOT NULL, "github_blog" character varying DEFAULT '' NOT NULL, "github_location" character varying DEFAULT '' NOT NULL, "github_bio" character varying DEFAULT '' NOT NULL, "github_created_at" timestamp NOT NULL, "github_updated_at" timestamp NOT NULL, "email" character varying DEFAULT '' NOT NULL, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_github_id" ON "users"  ("github_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171124111358"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAuthenticationTokens (20171129133214)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "authentication_tokens" ("id" bigserial primary key, "body" character varying, "user_id" bigint, "last_used_at" timestamp, "ip_address" character varying, "user_agent" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_ad331ebb27"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_authentication_tokens_on_user_id" ON "authentication_tokens"  ("user_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171129133214"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTags (20171130091259)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "tags" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_tags_on_name" ON "tags"  ("name")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171130091259"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpins (20171201125527)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "spins" ("id" bigserial primary key, "published" boolean DEFAULT 'f', "name" character varying, "full_name" text DEFAULT '', "description" text DEFAULT '', "clone_url" character varying, "html_url" character varying, "issues_url" character varying, "forks_count" integer DEFAULT 0, "stargazers_count" integer DEFAULT 0, "watchers_count" integer DEFAULT 0, "open_issues_count" integer DEFAULT 0, "size" integer DEFAULT 0, "gh_id" character varying, "gh_created_at" timestamp, "gh_pushed_at" timestamp, "gh_updated_at" timestamp, "gh_archived" boolean DEFAULT 'f', "default_branch" character varying DEFAULT 'master', "readme" text, "license_key" character varying, "license_name" character varying, "license_html_url" character varying, "version" character varying DEFAULT '0.0.0', "metadata" jsonb, "metadata_raw" text, "min_miq_version" integer DEFAULT 0, "first_import" timestamp, "score" float DEFAULT 0.0, "user_id" bigint, "company" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_1444c62c9c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_user_id" ON "spins"  ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_published" ON "spins"  ("published")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201125527"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTaggings (20171201192400)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "taggings" ("id" bigserial primary key, "spin_id" bigint, "tag_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_spin_id" ON "taggings"  ("spin_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_tag_id" ON "taggings"  ("tag_id")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201192400"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGitHubTokenToAuthenticationToken (20171205113330)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "github_token" character varying[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171205113330"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUserLoginToSpins (20171219101016)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spins" ADD "user_login" character varying[0m
  [1m[36mSpin Load (0.6ms)[0m  [1m[34mSELECT "spins".* FROM "spins"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171219101016"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVisibleBooleanToSpin (20171227101711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mALTER TABLE "spins" ADD "visible" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171227101711"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLogToSpin (20171229101504)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spins" ADD "log" text[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171229101504"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddReleasesToSpin (20180111095609)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "spins" ADD "releases" jsonb DEFAULT '[]'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180111095609"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProviderToToken (20180129165753)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "provider" character varying[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180129165753"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to ModifyUserParameters (20180201092313)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER "name" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_avatar_url" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_avatar_url" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_html_url" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_id" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_login" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_company" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_company" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_type" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_blog" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_blog" DROP DEFAULT[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_location" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_location" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_bio" DROP NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_bio" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_created_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_updated_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "email" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "email" DROP DEFAULT[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180201092313"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpinCandidates (20180205163158)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "spin_candidates" ("id" bigserial primary key, "full_name" text, "validation_log" text, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_07ac1d3d12"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_user_id" ON "spin_candidates"  ("user_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180205163158"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPublishedToSpinCandidate (20180206143819)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "published" boolean[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_published" ON "spin_candidates"  ("published")[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "validated" boolean[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "last_validation" timestamp[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206143819"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddSpinCandidateReferenceToSpin (20180206144300)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spins" ADD "spin_candidate_id" bigint[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_spin_candidate_id" ON "spins"  ("spin_candidate_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "spins" ADD CONSTRAINT "fk_rails_36c8a4ce1a"
FOREIGN KEY ("spin_candidate_id")
  REFERENCES "spin_candidates" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206144300"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveLogSpin (20180207112035)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" DROP "log"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180207112035"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-02-07 22:54:15.067094"], ["updated_at", "2018-02-07 22:54:15.067094"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(6807691543073318205)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2018-02-07 23:54:23 +0100
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 13ms (Views: 9.9ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:54:26 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started POST "/v1/users/sign_in" for 127.0.0.1 at 2018-02-07 23:54:26 +0100
Processing by V1::Users::SessionsController#create as HTML
  Parameters: {"session"=>{}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Creating session, verifying code sent
Verifying that the user code is valid and authenticating user
Generating new connection to GitHub
Valid code, finding or creating user aljesusg
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("id", "name", "github_avatar_url", "github_html_url", "github_id", "github_login", "github_company", "github_type", "github_blog", "github_location", "github_bio", "github_created_at", "github_updated_at", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["id", 3019213], ["name", "Alberto Gutierrez"], ["github_avatar_url", "https://avatars2.githubusercontent.com/u/3019213?v=4"], ["github_html_url", "https://github.com/aljesusg"], ["github_id", "3019213"], ["github_login", "aljesusg"], ["github_company", "@ManageIQ Red Hat, GDG"], ["github_type", "User"], ["github_blog", ""], ["github_location", "Granada,Spain"], ["github_bio", ""], ["github_created_at", "2012-12-11 19:52:55"], ["github_updated_at", "2018-01-27 15:58:25"], ["email", "aljesusg@gmail.com"], ["created_at", "2018-02-07 22:54:27.747988"], ["updated_at", "2018-02-07 22:54:27.747988"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Creating user session token
  [1m[36mAuthenticationToken Load (0.5ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."body" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["body", "a96cef90b6fb9d06bacf4f6b1e0f009c1d2d0740319cc6e90fbf734c40822916"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "authentication_tokens" ("body", "user_id", "last_used_at", "ip_address", "user_agent", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["body", "a96cef90b6fb9d06bacf4f6b1e0f009c1d2d0740319cc6e90fbf734c40822916"], ["user_id", 3019213], ["last_used_at", "2018-02-07 22:54:27.962619"], ["ip_address", "127.0.0.1"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36"], ["created_at", "2018-02-07 22:54:27.976752"], ["updated_at", "2018-02-07 22:54:27.976752"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "authentication_tokens" SET "updated_at" = $1, "github_token" = $2, "provider" = $3 WHERE "authentication_tokens"."id" = $4[0m  [["updated_at", "2018-02-07 22:54:27.984620"], ["github_token", "df290417ccf300c15635ec9335cdbe9f230bc204"], ["provider", "github.com"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Returning user info and token
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.54ms)
Completed 200 OK in 1561ms (Views: 2.7ms | ActiveRecord: 12.4ms)


Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:54:29 +0100
Processing by V1::SpinCandidatesController#index as HTML
  Parameters: {"api"=>{}}
Started GET "/" for 127.0.0.1 at 2018-02-07 23:54:29 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms)


  [1m[36mAuthenticationToken Load (0.7ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
Completed 204 No Content in 31ms (Views: 0.2ms | ActiveRecord: 7.9ms)


Started POST "/v1/spin_candidates/refresh" for 127.0.0.1 at 2018-02-07 23:54:32 +0100
Processing by V1::SpinCandidatesController#refresh as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] Enqueued RefreshSpinCandidatesJob (Job ID: 7eb0ba9c-f0b6-41e8-b083-4827f047c375) to Async(default) with arguments: {:user=>#<GlobalID:0x007fcfa3ca5998 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"zxvN7gLjVXAA_aT2Xv7S"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 202 Accepted in 30ms (Views: 0.9ms | ActiveRecord: 0.7ms)


  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375] Performing RefreshSpinCandidatesJob (Job ID: 7eb0ba9c-f0b6-41e8-b083-4827f047c375) from Async(default) with arguments: {:user=>#<GlobalID:0x007fcfaa0931a8 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"zxvN7gLjVXAA_aT2Xv7S"}
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375] Refresh Spin Candidates Job for user: 3019213
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375]   [1m[36mAuthenticationToken Load (0.9ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375]   [1m[36mCACHE AuthenticationToken Load (0.0ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375] Generating new connection to GitHub
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375]   [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375]   [1m[36mSpinCandidate Load (0.6ms)[0m  [1m[34mSELECT "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375]   [1m[36mSpin Load (0.6ms)[0m  [1m[34mSELECT "spins".* FROM "spins" WHERE 1=0[0m
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375]   [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "spin_candidates" ("id", "full_name", "validation_log", "user_id", "created_at", "updated_at", "published", "validated") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["id", 120679426], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["validation_log", "Pending validation"], ["user_id", 3019213], ["created_at", "2018-02-07 22:54:47.749904"], ["updated_at", "2018-02-07 22:54:47.749904"], ["published", "f"], ["validated", "f"]]
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [RefreshSpinCandidatesJob] [7eb0ba9c-f0b6-41e8-b083-4827f047c375] Performed RefreshSpinCandidatesJob (Job ID: 7eb0ba9c-f0b6-41e8-b083-4827f047c375) from Async(default) in 16210.68ms
Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:54:54 +0100
Started GET "/" for 127.0.0.1 at 2018-02-07 23:54:54 +0100
Processing by V1::SpinCandidatesController#index as HTML
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.27ms)
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.0ms)


  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.6ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[36mSpinCandidate Load (0.6ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" LIMIT $1 OFFSET $2[0m  [["LIMIT", 20], ["OFFSET", 0]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (3.27ms)
Completed 200 OK in 27ms (Views: 14.6ms | ActiveRecord: 3.3ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:54:57 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "api"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mSpin Load (0.5ms)[0m  [1m[34mSELECT  "spins".* FROM "spins" WHERE "spins"."spin_candidate_id" = $1 LIMIT $2[0m  [["spin_candidate_id", 120679426], ["LIMIT", 1]]
Generating new connection to GitHub
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "spin_candidates" SET "validated" = $1, "validation_log" = $2, "updated_at" = $3 WHERE "spin_candidates"."id" = $4[0m  [["validated", "t"], ["validation_log", "[OK] Spin is validated"], ["updated_at", "2018-02-07 22:55:00.120266"], ["id", 120679426]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "spins" ("name", "full_name", "description", "clone_url", "html_url", "issues_url", "size", "gh_id", "gh_created_at", "gh_pushed_at", "gh_updated_at", "readme", "version", "metadata", "metadata_raw", "min_miq_version", "user_id", "created_at", "updated_at", "user_login", "releases", "spin_candidate_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22) RETURNING "id"[0m  [["name", "[\"manageiq-exchange-spin-template\", \"# Test repo for content in ManageIQ Exchange\\n\\nIn order to publish a Spin in ManageIQ Exchange you will need:\\n\\n - A file that identifies the repo as a manageiq-spin\\n ```.manageiq-spin```\\n - A metadata file with the right format (please see template comments in \\n ```metadata.yml```. Metadata format is validated.\\n - At least a [release](https://help.github.com/articles/creating-releases/) in the GitHub Repo. Please use vx.y.z as the release tag, except for betas or special test releases. For instance, v1.0.0\\n - A license that is identified in GitHub (use the add license)\\n\", \"aljesusg/manageiq-exchange-spin-template\", \"ManageIQ Example repo\", \"https://github.com/aljesusg/manageiq-exchange-spin-template.git\", \"https://github.com/aljesusg/manageiq-exchange-spin-template\", \"https://api.github.com/repos/aljesusg/manageiq-exchange-spin-template/issues\", 0, 0, 0, 0, 61, 120679426, 2018-02-07 22:24:40 UTC, 2018-02-06 15:58:05 UTC, 2018-02-05 12:47:32 UTC, false, \"master\", nil, nil, nil, nil, 7, {\"metadata_version\"=>1, \"description\"=>\"Description\", \"author\"=>\"Author Name\", \"company\"=>nil, \"min_miq_version\"=>\"h\", \"tags\"=>[\"demo\", \"open source\"]}]"], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["description", "ManageIQ Example repo"], ["clone_url", "https://github.com/aljesusg/manageiq-exchange-spin-template.git"], ["html_url", "https://github.com/aljesusg/manageiq-exchange-spin-template"], ["issues_url", "https://api.github.com/repos/aljesusg/manageiq-exchange-spin-template/issues"], ["size", 61], ["gh_id", "120679426"], ["gh_created_at", "2018-02-07 22:24:40"], ["gh_pushed_at", "2018-02-06 15:58:05"], ["gh_updated_at", "2018-02-05 12:47:32"], ["readme", "# Test repo for content in ManageIQ Exchange\n\nIn order to publish a Spin in ManageIQ Exchange you will need:\n\n - A file that identifies the repo as a manageiq-spin\n ```.manageiq-spin```\n - A metadata file with the right format (please see template comments in \n ```metadata.yml```. Metadata format is validated.\n - At least a [release](https://help.github.com/articles/creating-releases/) in the GitHub Repo. Please use vx.y.z as the release tag, except for betas or special test releases. For instance, v1.0.0\n - A license that is identified in GitHub (use the add license)\n"], ["version", nil], ["metadata", "{\"metadata_version\":1,\"description\":\"Description\",\"author\":\"Author Name\",\"company\":null,\"min_miq_version\":\"h\",\"tags\":[\"demo\",\"open source\"]}"], ["metadata_raw", "metadata_version: 1 # It must be 1\ndescription: \"Description\"\nauthor: \"Author Name\"\ncompany: #Optional\n\nmin_miq_version: \"h\"\n# A letter with the manageiq_version:\n# For Hammer, use \"h\"\n# For Gaprishdanvili, use \"g\"\n# Etc.\n\n# max_miq_version: \"h\"\n\ntags: ['demo','open source']\n# List tags for your spin here, one per line. A tag is a keyword that describes\n# and categorizes the spin. Users find spins by searching for tags. Be sure to\n# remove the '[]' above, if you add tags to this list.\n#\n# NOTE: A tag is limited to a single word comprised of alphanumeric characters.\n# Maximum 20 tags per spin.\n\n# Spin version\n# The spin version will be gathered from the releases tag in GitHub\n\n# Many licenses need an actual file to work. We use the License API from GitHub\n# Some suggested licenses to configure in the repo:\n# - BSD (default)\n# - MIT\n# - GPLv2\n# - GPLv3\n# - Apache\n# - CC-BY\n# - The Unlicense\n"], ["min_miq_version", 7], ["user_id", 3019213], ["created_at", "2018-02-07 22:55:00.122002"], ["updated_at", "2018-02-07 22:55:00.122002"], ["user_login", "aljesusg"], ["releases", "[[],{\"id\":3019213,\"name\":\"Alberto Gutierrez\",\"admin\":false,\"staff\":false,\"karma\":0,\"github_avatar_url\":\"https://avatars2.githubusercontent.com/u/3019213?v=4\",\"github_html_url\":\"https://github.com/aljesusg\",\"github_id\":\"3019213\",\"github_login\":\"aljesusg\",\"github_company\":\"@ManageIQ Red Hat, GDG\",\"github_type\":\"User\",\"github_blog\":\"\",\"github_location\":\"Granada,Spain\",\"github_bio\":\"\",\"github_created_at\":\"2012-12-11T19:52:55.000Z\",\"github_updated_at\":\"2018-01-27T15:58:25.000Z\",\"email\":\"aljesusg@gmail.com\",\"created_at\":\"2018-02-07T22:54:27.747Z\",\"updated_at\":\"2018-02-07T22:54:27.747Z\"},\"aljesusg\"]"], ["spin_candidate_id", 120679426]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "spins" SET "updated_at" = $1, "visible" = $2 WHERE "spins"."id" = $3[0m  [["updated_at", "2018-02-07 22:55:00.126898"], ["visible", "t"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered V1::SpinCandidateSerializer with ActiveModelSerializers::Adapter::Json (0.91ms)
Completed 200 OK in 2283ms (Views: 1.3ms | ActiveRecord: 6.4ms)


Started GET "/spins" for 127.0.0.1 at 2018-02-07 23:55:25 +0100
Processing by V1::SpinsController#index as HTML
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "spins" WHERE "spins"."visible" = $1[0m  [["visible", "t"]]
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "spins" WHERE "spins"."visible" = $1[0m  [["visible", "t"]]
  [1m[36mSpin Load (0.5ms)[0m  [1m[34mSELECT  "spins".* FROM "spins" WHERE "spins"."visible" = $1 LIMIT $2 OFFSET $3[0m  [["visible", "t"], ["LIMIT", 20], ["OFFSET", 0]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (1.12ms)
Completed 200 OK in 8ms (Views: 4.1ms | ActiveRecord: 1.6ms)


Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:56:18 +0100
Started GET "/" for 127.0.0.1 at 2018-02-07 23:56:18 +0100
Processing by V1::SpinCandidatesController#index as HTML
  Parameters: {"spin_candidate"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (3.5ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[36mSpinCandidate Load (1.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" LIMIT $1 OFFSET $2[0m  [["LIMIT", 20], ["OFFSET", 0]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (2.23ms)
Completed 200 OK in 101ms (Views: 20.0ms | ActiveRecord: 10.2ms)


Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (185.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_development"[0m
  [1m[35m (178.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "exchange_test"[0m
  [1m[35m (381.9ms)[0m  [1m[35mCREATE DATABASE "exchange_development" ENCODING = 'unicode'[0m
  [1m[35m (636.7ms)[0m  [1m[35mCREATE DATABASE "exchange_test" ENCODING = 'unicode'[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6807691543073318205)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20171124111358)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying NOT NULL, "admin" boolean DEFAULT 'f' NOT NULL, "staff" boolean DEFAULT 'f' NOT NULL, "karma" integer DEFAULT 0 NOT NULL, "github_avatar_url" character varying DEFAULT '' NOT NULL, "github_html_url" character varying NOT NULL, "github_id" character varying NOT NULL, "github_login" character varying NOT NULL, "github_company" character varying DEFAULT '' NOT NULL, "github_type" character varying NOT NULL, "github_blog" character varying DEFAULT '' NOT NULL, "github_location" character varying DEFAULT '' NOT NULL, "github_bio" character varying DEFAULT '' NOT NULL, "github_created_at" timestamp NOT NULL, "github_updated_at" timestamp NOT NULL, "email" character varying DEFAULT '' NOT NULL, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_github_id" ON "users"  ("github_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171124111358"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAuthenticationTokens (20171129133214)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "authentication_tokens" ("id" bigserial primary key, "body" character varying, "user_id" bigint, "last_used_at" timestamp, "ip_address" character varying, "user_agent" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_ad331ebb27"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX  "index_authentication_tokens_on_user_id" ON "authentication_tokens"  ("user_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171129133214"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTags (20171130091259)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "tags" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_tags_on_name" ON "tags"  ("name")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171130091259"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpins (20171201125527)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "spins" ("id" bigserial primary key, "published" boolean DEFAULT 'f', "name" character varying, "full_name" text DEFAULT '', "description" text DEFAULT '', "clone_url" character varying, "html_url" character varying, "issues_url" character varying, "forks_count" integer DEFAULT 0, "stargazers_count" integer DEFAULT 0, "watchers_count" integer DEFAULT 0, "open_issues_count" integer DEFAULT 0, "size" integer DEFAULT 0, "gh_id" character varying, "gh_created_at" timestamp, "gh_pushed_at" timestamp, "gh_updated_at" timestamp, "gh_archived" boolean DEFAULT 'f', "default_branch" character varying DEFAULT 'master', "readme" text, "license_key" character varying, "license_name" character varying, "license_html_url" character varying, "version" character varying DEFAULT '0.0.0', "metadata" jsonb, "metadata_raw" text, "min_miq_version" integer DEFAULT 0, "first_import" timestamp, "score" float DEFAULT 0.0, "user_id" bigint, "company" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_1444c62c9c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_user_id" ON "spins"  ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_published" ON "spins"  ("published")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201125527"]]
  [1m[35m (15.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTaggings (20171201192400)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "taggings" ("id" bigserial primary key, "spin_id" bigint, "tag_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_spin_id" ON "taggings"  ("spin_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX  "index_taggings_on_tag_id" ON "taggings"  ("tag_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171201192400"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGitHubTokenToAuthenticationToken (20171205113330)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "github_token" character varying[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171205113330"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUserLoginToSpins (20171219101016)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" ADD "user_login" character varying[0m
  [1m[36mSpin Load (0.6ms)[0m  [1m[34mSELECT "spins".* FROM "spins"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171219101016"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVisibleBooleanToSpin (20171227101711)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "spins" ADD "visible" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171227101711"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLogToSpin (20171229101504)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" ADD "log" text[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171229101504"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddReleasesToSpin (20180111095609)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "spins" ADD "releases" jsonb DEFAULT '[]'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180111095609"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddProviderToToken (20180129165753)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "authentication_tokens" ADD "provider" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180129165753"]]
  [1m[35m (9.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to ModifyUserParameters (20180201092313)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER "name" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_avatar_url" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_avatar_url" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_html_url" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_id" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_login" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_company" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_company" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_type" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_blog" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_blog" DROP DEFAULT[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_html_url" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_location" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_location" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_bio" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "github_bio" DROP DEFAULT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_created_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "github_updated_at" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER "email" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "email" DROP DEFAULT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180201092313"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSpinCandidates (20180205163158)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "spin_candidates" ("id" bigserial primary key, "full_name" text, "validation_log" text, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_07ac1d3d12"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_user_id" ON "spin_candidates"  ("user_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180205163158"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPublishedToSpinCandidate (20180206143819)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "published" boolean[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spin_candidates_on_published" ON "spin_candidates"  ("published")[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "validated" boolean[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spin_candidates" ADD "last_validation" timestamp[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206143819"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddSpinCandidateReferenceToSpin (20180206144300)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "spins" ADD "spin_candidate_id" bigint[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX  "index_spins_on_spin_candidate_id" ON "spins"  ("spin_candidate_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "spins" ADD CONSTRAINT "fk_rails_36c8a4ce1a"
FOREIGN KEY ("spin_candidate_id")
  REFERENCES "spin_candidates" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180206144300"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveLogSpin (20180207112035)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "spins" DROP "log"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180207112035"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-02-07 22:57:08.950335"], ["updated_at", "2018-02-07 22:57:08.950335"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(6807691543073318205)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2018-02-07 23:57:27 +0100
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:57:30 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started POST "/v1/users/sign_in" for 127.0.0.1 at 2018-02-07 23:57:30 +0100
Processing by V1::Users::SessionsController#create as HTML
  Parameters: {"session"=>{}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Creating session, verifying code sent
Verifying that the user code is valid and authenticating user
Generating new connection to GitHub
Valid code, finding or creating user aljesusg
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("id", "name", "github_avatar_url", "github_html_url", "github_id", "github_login", "github_company", "github_type", "github_blog", "github_location", "github_bio", "github_created_at", "github_updated_at", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["id", 3019213], ["name", "Alberto Gutierrez"], ["github_avatar_url", "https://avatars2.githubusercontent.com/u/3019213?v=4"], ["github_html_url", "https://github.com/aljesusg"], ["github_id", "3019213"], ["github_login", "aljesusg"], ["github_company", "@ManageIQ Red Hat, GDG"], ["github_type", "User"], ["github_blog", ""], ["github_location", "Granada,Spain"], ["github_bio", ""], ["github_created_at", "2012-12-11 19:52:55"], ["github_updated_at", "2018-01-27 15:58:25"], ["email", "aljesusg@gmail.com"], ["created_at", "2018-02-07 22:57:32.163870"], ["updated_at", "2018-02-07 22:57:32.163870"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Creating user session token
  [1m[36mAuthenticationToken Load (0.5ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."body" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["body", "9d9a2a562d14d44f430aad81f4b54399beb750a1f086a4e8ae36aebb7fea8bdc"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "authentication_tokens" ("body", "user_id", "last_used_at", "ip_address", "user_agent", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["body", "9d9a2a562d14d44f430aad81f4b54399beb750a1f086a4e8ae36aebb7fea8bdc"], ["user_id", 3019213], ["last_used_at", "2018-02-07 22:57:32.352721"], ["ip_address", "127.0.0.1"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36"], ["created_at", "2018-02-07 22:57:32.366368"], ["updated_at", "2018-02-07 22:57:32.366368"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "authentication_tokens" SET "updated_at" = $1, "github_token" = $2, "provider" = $3 WHERE "authentication_tokens"."id" = $4[0m  [["updated_at", "2018-02-07 22:57:32.373664"], ["github_token", "a1c181c4dde0cc21ef7d5ecb4cde8fe1c8935082"], ["provider", "github.com"], ["id", 1]]
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
Returning user info and token
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.55ms)
Completed 200 OK in 1463ms (Views: 2.6ms | ActiveRecord: 15.8ms)


Started GET "/" for 127.0.0.1 at 2018-02-07 23:57:37 +0100
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.28ms)
Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)


Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:57:37 +0100
Processing by V1::SpinCandidatesController#index as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (5.9ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
Completed 204 No Content in 34ms (Views: 0.2ms | ActiveRecord: 10.4ms)


Started POST "/v1/spin_candidates/refresh" for 127.0.0.1 at 2018-02-07 23:57:38 +0100
Processing by V1::SpinCandidatesController#refresh as HTML
  Parameters: {"api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] Enqueued RefreshSpinCandidatesJob (Job ID: 451d7ede-ab69-4b59-9d35-44fa012d4e28) to Async(default) with arguments: {:user=>#<GlobalID:0x007fbcc0ddaed0 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"8jma9y8Utvpv8mMxwMkw"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 202 Accepted in 31ms (Views: 0.7ms | ActiveRecord: 0.7ms)


  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28] Performing RefreshSpinCandidatesJob (Job ID: 451d7ede-ab69-4b59-9d35-44fa012d4e28) from Async(default) with arguments: {:user=>#<GlobalID:0x007fbcc38e42e8 @uri=#<URI::GID gid://manageiq-exchange/User/3019213>>, :token=>"8jma9y8Utvpv8mMxwMkw"}
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28] Refresh Spin Candidates Job for user: 3019213
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28]   [1m[36mAuthenticationToken Load (0.8ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28]   [1m[36mCACHE AuthenticationToken Load (0.0ms)[0m  [1m[34mSELECT  "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1 ORDER BY "authentication_tokens"."id" ASC LIMIT $2[0m  [["user_id", 3019213], ["LIMIT", 1]]
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28] Generating new connection to GitHub
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28]   [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28]   [1m[36mSpinCandidate Load (0.4ms)[0m  [1m[34mSELECT "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."user_id" = $1[0m  [["user_id", 3019213]]
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28]   [1m[36mSpin Load (0.6ms)[0m  [1m[34mSELECT "spins".* FROM "spins" WHERE 1=0[0m
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28]   [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "spin_candidates" ("id", "full_name", "validation_log", "user_id", "created_at", "updated_at", "published", "validated") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["id", 120679426], ["full_name", "aljesusg/manageiq-exchange-spin-template"], ["validation_log", "Pending validation"], ["user_id", 3019213], ["created_at", "2018-02-07 22:57:54.459084"], ["updated_at", "2018-02-07 22:57:54.459084"], ["published", "f"], ["validated", "f"]]
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28]   [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [RefreshSpinCandidatesJob] [451d7ede-ab69-4b59-9d35-44fa012d4e28] Performed RefreshSpinCandidatesJob (Job ID: 451d7ede-ab69-4b59-9d35-44fa012d4e28) from Async(default) in 16704.86ms
Started GET "/v1/spin_candidates/" for 127.0.0.1 at 2018-02-07 23:58:04 +0100
Processing by V1::SpinCandidatesController#index as HTML
Started GET "/" for 127.0.0.1 at 2018-02-07 23:58:04 +0100
  Parameters: {"api"=>{}}
Processing by V1::ApiController#version as HTML
  Parameters: {"api"=>{}}
Creating session, verifying code
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.41ms)
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.0ms)


  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "spin_candidates"[0m
  [1m[36mSpinCandidate Load (0.6ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" LIMIT $1 OFFSET $2[0m  [["LIMIT", 20], ["OFFSET", 0]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (3.6ms)
Completed 200 OK in 29ms (Views: 16.9ms | ActiveRecord: 2.4ms)


Started POST "/v1/spin_candidates/120679426/publish" for 127.0.0.1 at 2018-02-07 23:58:07 +0100
Processing by V1::SpinCandidatesController#publish as HTML
  Parameters: {"spin_candidate_id"=>"120679426", "api"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1m[34mSELECT "authentication_tokens".* FROM "authentication_tokens" WHERE "authentication_tokens"."user_id" = $1[0m  [["user_id", 3019213]]
  [1m[36mSpinCandidate Load (0.2ms)[0m  [1m[34mSELECT  "spin_candidates".* FROM "spin_candidates" WHERE "spin_candidates"."id" = $1 LIMIT $2[0m  [["id", 120679426], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019213], ["LIMIT", 1]]
Completed 204 No Content in 6ms (ActiveRecord: 1.1ms)


